# PHP XHE DOM Automation Framework

Проект для автоматизации веб-взаимодействий с использованием PHP и XHE API (Extreme Home Environment).

## Описание проекта

Этот проект предоставляет PHP-фреймворк для автоматизации веб-браузерных операций через XHE API. Позволяет программно управлять DOM элементами, выполнять клики, вводить текст, извлекать данные и выполнять другие операции с веб-страницами.

## Структура проекта

```
├── bot.php                           # Основной файл бота для тестирования
├── bot1.php                          # Дополнительный файл бота с примерами
├── docs/                             # Документация и примеры
│   ├── examples/                     # Примеры использования
│   │   ├── DOM/                      # Примеры работы с DOM элементами
│   │   │   ├── XHEAnchor/           # Примеры работы с якорными элементами
│   │   │   ├── XHEInterface/        # Примеры работы с интерфейсными элементами
│   │   │   └── XHEInterface_AI/     # Примеры работы с AI интерфейсом
│   │   └── Tools/                   # Инструменты и утилиты
│   └── README.md                    # Документация по примерам
├── interface/                        # Интерфейсные файлы
├── reference.md                     # Справочная документация
└── README.md                        # Этот файл
```

## Основные компоненты

### XHE Классы

Проект использует XHE классы для работы с различными типами DOM элементов:

- **DOM::$anchor** - Работа с якорными элементами (ссылки)
- **DOM::$input** - Работа с полями ввода
- **DOM::$button** - Работа с кнопками
- **DOM::$label** - Работа с метками
- **DOM::$element** - Работа с универсальными элементами
- **DOM::$table** - Работа с таблицами
- **DOM::$tr** - Работа с строками таблиц
- **WEB::$browser** - Управление браузером
- **WINDOW::$debug** - Отладка и вывод сообщений
- **WINDOW::$app** - Управление приложением

### Основные возможности

- Поиск элементов по атрибутам, тексту, XPath
- Взаимодействие с элементами (клики, ввод текста, фокус)
- Извлечение данных (текст, атрибуты, HTML)
- Работа с формами и таблицами
- Отладка и логирование
- Управление браузером

## Примеры использования

### Подключение к XHE API

```php
// Путь к файлу init.php
$path = "../../Templates/init.php";
require($path);
```

### Поиск элемента по тексту

```php
// Найти метку по тексту
$label = DOM::$label->get_by_inner_text("Номер договора", false);

// Найти поле ввода рядом с меткой
if ($label && $label->is_exist()) {
    $forId = $label->get_attribute("for");
    $inputInterface = DOM::$input->get_by_id($forId, true);
}
```

### Ввод текста и клик

```php
// Ввести текст в поле
$inputInterface->focus();
$inputInterface->set_value($accountNumber);

// Найти и нажать кнопку
$searchBtn = DOM::$btn->get_by_inner_text("Поиск", true);
if ($searchBtn && $searchBtn->is_exist()) {
    $searchBtn->click(true);
}
```

### Ожидание появления элемента

```php
// Ожидать появления строки с номером в таблице
$found = false;
for ($i = 0; $i < 60; $i++) {
    if (DOM::$tr->is_exist_by_inner_text($accountNumber, false)) {
        $found = true;
        break;
    }
    usleep(250000);
}
```

### Вывод сообщений в консоль

```php
// Вывод сообщения в консоль отладки
WINDOW::$debug->set_tab_content("Консоль", "Сообщение", true);
```

## Документация

Подробные примеры использования каждого класса и метода находятся в директории `docs/examples/`.

### Примеры в DOM/

- **XHEInterface/** - Примеры работы с базовыми методами интерфейса
- **XHEAnchor/** - Примеры работы с якорными элементами
- **XHEInterface_AI/** - Примеры работы с AI функциями

## Требования

- PHP 8.2 или выше
- XHE сервер (работает на порту 7010 по умолчанию)
- Совместимый браузер (Chrome, Firefox, etc.)

## Настройка

1. Убедитесь, что XHE сервер запущен и доступен на `127.0.0.1:7010`
2. Настройте путь к файлу `init.php` в ваших скриптах
3. Запустите PHP скрипт для выполнения операций

## Лицензия

Этот проект предназначен для образовательных и исследовательских целей.